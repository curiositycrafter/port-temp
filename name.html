<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vikki Handwriting Animation</title>
    <style>
        body {
            margin: 0;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: #f0f0f0;
            font-family: sans-serif;
            flex-direction: column;
        }

        .container {
            background: white;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            text-align: center;
        }

        svg {
            width: 100%;
            max-width: 600px;
            height: auto;
            touch-action: none;
        }

        .handwriting-path {
            fill: none;
            stroke: #000000;
            stroke-width: 5;
            stroke-linecap: round;
            stroke-linejoin: round;
        }
    </style>
</head>
<body>

    <div class="container">
        <svg viewBox="0 0 500 250" id="vikkiSvg">
            <!-- 
                I have split the original path into 3 separate strokes based on the 'Move' (M) commands.
                This allows us to animate them one after another.
            -->
            
            <!-- Stroke 1: "V" part -->
            <path id="stroke1" class="handwriting-path" d="
                M 60,100 
                C 70,140 80,140 90,100 
                C 95,90 100,90 105,110 
                L 115,150 
                C 120,165 130,165 135,140 
                L 155,50 
                L 145,160 
            " />

            <!-- Stroke 2: First "i" and part of "k" -->
            <path id="stroke2" class="handwriting-path" d="
                M 150,130 
                C 180,110 180,130 160,145 
                L 180,160 
                C 190,170 195,160 200,120
                L 215,50 
                L 205,160 
            " />

            <!-- Stroke 3: Rest of "k" and last "i" -->
            <path id="stroke3" class="handwriting-path" d="
                M 210,130 
                C 240,110 240,130 220,145 
                L 240,160 
                C 250,170 255,160 260,140
                L 270,160
                C 275,170 285,170 295,150
            " />

            <!-- Dots -->
            <path id="dot1" class="handwriting-path" d="M 115,90 L 115,92" stroke-width="8" />
            <path id="dot2" class="handwriting-path" d="M 270,125 L 270,127" stroke-width="8" />
        </svg>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            // Select all segments
            const stroke1 = document.getElementById('stroke1');
            const stroke2 = document.getElementById('stroke2');
            const stroke3 = document.getElementById('stroke3');
            const dot1 = document.getElementById('dot1');
            const dot2 = document.getElementById('dot2');

            // Helper to initialize stroke-dash properties
            const preparePath = (el) => {
                const len = el.getTotalLength();
                el.style.strokeDasharray = len;
                el.style.strokeDashoffset = len;
                return len;
            };

            const len1 = preparePath(stroke1);
            const len2 = preparePath(stroke2);
            const len3 = preparePath(stroke3);
            const lenDot1 = preparePath(dot1);
            const lenDot2 = preparePath(dot2);

            // --- Timing Configuration ---
            const totalWriteTime = 2500; // Total time for the letters (strokes 1-3)
            const totalLen = len1 + len2 + len3;
            
            // Calculate duration per stroke based on its length (so speed is constant)
            const dur1 = (len1 / totalLen) * totalWriteTime;
            const dur2 = (len2 / totalLen) * totalWriteTime;
            const dur3 = (len3 / totalLen) * totalWriteTime;

            const dotDuration = 200;
            const pauseTime = 1000;

            // Helper to create an animation object
            const createAnim = (el, len, duration) => {
                return new Animation(
                    new KeyframeEffect(
                        el,
                        [{ strokeDashoffset: len }, { strokeDashoffset: 0 }],
                        { duration: duration, fill: 'forwards', easing: 'ease-in-out' }
                    ),
                    document.timeline
                );
            };

            // Main loop
            async function playAnimationLoop() {
                // --- WRITE SEQUENCE ---
                
                // Stroke 1
                const anim1 = createAnim(stroke1, len1, dur1);
                anim1.play();
                await anim1.finished;

                // Stroke 2
                const anim2 = createAnim(stroke2, len2, dur2);
                anim2.play();
                await anim2.finished;

                // Stroke 3
                const anim3 = createAnim(stroke3, len3, dur3);
                anim3.play();
                await anim3.finished;

                // Dots (Sequential)
                const animDot1 = createAnim(dot1, lenDot1, dotDuration);
                animDot1.play();
                await animDot1.finished;

                const animDot2 = createAnim(dot2, lenDot2, dotDuration);
                animDot2.play();
                await animDot2.finished;

                // --- PAUSE ---
                await new Promise(r => setTimeout(r, pauseTime));

                // --- ERASE SEQUENCE (Reverse) ---
                
                animDot2.reverse();
                await animDot2.finished;

                animDot1.reverse();
                await animDot1.finished;

                anim3.reverse();
                await anim3.finished;

                anim2.reverse();
                await anim2.finished;

                anim1.reverse();
                await anim1.finished;

                // --- PAUSE BEFORE RESTART ---
                await new Promise(r => setTimeout(r, 800));
                
                playAnimationLoop();
            }

            playAnimationLoop();
        });
    </script>
</body>
</html>