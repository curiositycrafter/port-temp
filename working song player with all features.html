<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vinyl Player Final</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class', 
        }
    </script>
    <style>
        .paused-anim {
            animation-play-state: paused !important;
        }
        /* Custom styling for range inputs */
        input[type=range] {
            accent-color: #4f46e5; 
        }
        /* Smooth transition for background colors */
        body {
            transition: background-color 0.5s ease;
        }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen bg-gray-200 dark:bg-gray-900">

  <div class="flex flex-col items-center group/he select-none relative mt-24">
    
    <div class="relative z-0 h-16 -mb-2 transition-all duration-200 group-hover/he:h-0">
      <svg id="mainVinyl" width="128" height="128" viewBox="0 0 128 128"
        class="duration-500 border-4 rounded-full shadow-md border-zinc-400 dark:border-zinc-600 border-spacing-5 animate-[spin_4s_linear_infinite] paused-anim transition-all bg-black">
          <svg>
              <rect width="128" height="128" fill="#18181b"></rect>
              <circle cx="64" cy="64" r="60" fill="none" stroke="#27272a" stroke-width="1"></circle>
              <circle cx="64" cy="64" r="55" fill="none" stroke="#27272a" stroke-width="1"></circle>
              <circle cx="64" cy="64" r="50" fill="none" stroke="#27272a" stroke-width="1"></circle>
              <circle id="mainLabelColor" cx="64" cy="64" r="24" fill="#ef4444"></circle> 
              <circle cx="64" cy="64" r="4" fill="white"></circle>
              <path d="M0 128 Q32 64 64 128 T128 128" fill="rgba(255,255,255,0.1)" stroke="none"></path>
          </svg>
      </svg>
      <div class="absolute z-10 w-8 h-8 bg-white dark:bg-gray-700 border-4 rounded-full shadow-sm border-zinc-400 dark:border-zinc-600 top-12 left-12"></div>
    </div>

    <div class="relative z-30 flex flex-col w-52 h-20 transition-all duration-300 bg-white dark:bg-gray-800 shadow-xl group-hover/he:h-44 group-hover/he:w-[28rem] rounded-2xl shadow-zinc-400 dark:shadow-black overflow-hidden border border-transparent dark:border-gray-700">
      
      <label class="absolute top-3 right-3 z-50 opacity-0 group-hover/he:opacity-100 transition-opacity duration-300 cursor-pointer">
          <input type="checkbox" class="theme-switch__checkbox hidden" />
          <svg class="hidden dark:block text-gray-200 hover:text-yellow-400 transition-colors" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg>
          <svg class="block dark:hidden text-gray-500 hover:text-indigo-600 transition-colors" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg>
      </label>

      <div class="flex flex-row w-full h-0 group-hover/he:h-24 transition-all duration-300 relative items-center">
        
        <div class="relative flex items-center justify-center w-24 h-24 ml-2 group-hover/he:opacity-100 opacity-0 transition-opacity duration-300">
           <div id="artContainer" class="w-20 h-20 rounded-full border-4 border-zinc-200 dark:border-zinc-600 shadow-md overflow-hidden animate-[spin_4s_linear_infinite] paused-anim">
               <img id="albumArtImg" src="" alt="Cover" class="w-full h-full object-cover" />
           </div>
           <div class="absolute w-4 h-4 bg-white dark:bg-gray-800 rounded-full border border-gray-300 dark:border-gray-600"></div>
        </div>
        
        <div class="flex flex-col justify-center flex-grow pl-4 pr-10 overflow-hidden whitespace-nowrap opacity-0 group-hover/he:opacity-100 transition-opacity duration-300 delay-75">
          <p id="songTitle" class="text-xl font-bold text-gray-800 dark:text-white truncate">Song Title</p>
          <p id="songArtist" class="text-sm text-gray-500 dark:text-gray-400 truncate">Artist Name</p>
        </div>
      </div>
      
      <div class="flex flex-row mx-4 mt-6 bg-indigo-50 dark:bg-gray-700 rounded-md h-6 items-center px-2 transition-all duration-300 group-hover/he:mt-0">
        <span id="currTime" class="hidden pl-1 text-xs text-gray-500 dark:text-gray-300 w-10 group-hover/he:inline-block">0:00</span>
        <input type="range" id="progress" min="0" max="100" value="0" class="w-full h-1 mx-2 my-auto bg-gray-300 dark:bg-gray-600 rounded-full appearance-none hover:h-2 transition-all cursor-pointer" />
        <span id="durTime" class="hidden pr-1 text-xs text-gray-500 dark:text-gray-300 w-10 text-right group-hover/he:inline-block">0:00</span>
      </div>
      
      <div class="flex flex-row items-center justify-between mx-6 pb-2 mt-2 text-gray-600 dark:text-gray-300">
        
        <div class="flex items-center gap-3">
            <button id="shuffleBtn" class="hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors focus:outline-none"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="16 3 21 3 21 8"></polyline><line x1="4" y1="20" x2="21" y2="3"></line><polyline points="21 16 21 21 16 21"></polyline><line x1="15" y1="15" x2="21" y2="21"></line><line x1="4" y1="4" x2="9" y2="9"></line></svg></button>
            <button id="prevBtn" class="hover:text-indigo-600 dark:hover:text-indigo-400 focus:outline-none"><svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="19 20 9 12 19 4 19 20"></polygon><line x1="5" y1="19" x2="5" y2="5"></line></svg></button>
        </div>

        <button id="playBtn" class="flex items-center justify-center w-10 h-10 bg-indigo-600 text-white rounded-full shadow-md hover:bg-indigo-700 hover:scale-105 transition-all focus:outline-none mx-2">
            <svg id="playIcon" class="ml-0.5" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg>
            <svg id="pauseIcon" class="hidden" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="6" y="4" width="4" height="16"></rect><rect x="14" y="4" width="4" height="16"></rect></svg>
        </button>

        <div class="flex items-center gap-3">
            <button id="nextBtn" class="hover:text-indigo-600 dark:hover:text-indigo-400 focus:outline-none"><svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="5 4 15 12 5 20 5 4"></polygon><line x1="19" y1="5" x2="19" y2="19"></line></svg></button>
            <button id="repeatBtn" class="hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors focus:outline-none"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="17 1 21 5 17 9"></polyline><path d="M3 11V9a4 4 0 0 1 4-4h14"></path><polyline points="7 23 3 19 7 15"></polyline><path d="M21 13v2a4 4 0 0 1-4 4H3"></path></svg></button>
        </div>

        <div class="w-px h-6 bg-gray-300 dark:bg-gray-600 mx-2"></div>

        <div class="flex items-center gap-2 group/vol relative">
            
            <button id="muteBtn" class="hover:text-indigo-600 dark:hover:text-indigo-400 focus:outline-none">
                <svg id="volIconHigh" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><path d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"></path></svg>
                <svg id="volIconMute" class="hidden" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><line x1="23" y1="9" x2="17" y2="15"></line><line x1="17" y1="9" x2="23" y2="15"></line></svg>
            </button>

            <div class="w-0 overflow-hidden group-hover/vol:w-16 transition-all duration-300 ease-out">
                 <input type="range" id="volSlider" min="0" max="1" step="0.1" value="1" class="w-16 h-1 bg-gray-300 dark:bg-gray-600 rounded-full appearance-none cursor-pointer">
            </div>
        </div>

      </div>
    </div>
  </div>

<script>
    // --- 1. THEME LOGIC (YOUR CODE + TAILWIND BRIDGE) ---
    document.addEventListener("DOMContentLoaded", () => {
        const checkbox = document.querySelector(".theme-switch__checkbox");
        const savedTheme = localStorage.getItem("theme") || "light";

        // Remove both classes first
        document.body.classList.remove("light-mode", "dark-mode");
        document.documentElement.classList.remove("dark"); // Remove Tailwind dark

        // Apply theme based on save
        if (savedTheme === "dark") {
            document.body.classList.add("dark-mode");
            document.documentElement.classList.add("dark"); // Trigger Tailwind
            checkbox.checked = true;
        } else {
            document.body.classList.add("light-mode");
            document.documentElement.classList.remove("dark");
            checkbox.checked = false;
        }

        // Toggle handler
        checkbox.addEventListener("change", () => {
            if (checkbox.checked) {
                document.body.classList.remove("light-mode");
                document.body.classList.add("dark-mode");
                document.documentElement.classList.add("dark"); // Add Tailwind class
                localStorage.setItem("theme", "dark");
            } else {
                document.body.classList.remove("dark-mode");
                document.body.classList.add("light-mode");
                document.documentElement.classList.remove("dark"); // Remove Tailwind class
                localStorage.setItem("theme", "light");
            }
        });
    });

    // --- 2. CONFIGURATION: AUDIO & IMAGES ---
    const songs = [
        { title: "Neon Lights", artist: "Synthwave Boy", path: "https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3", cover: "https://images.unsplash.com/photo-1614613535308-eb5fbd3d2c17?q=80&w=300&auto=format&fit=crop", color: "#6366f1" },
        { title: "Midnight Drive", artist: "Lofi Girl", path: "https://www.soundhelix.com/examples/mp3/SoundHelix-Song-2.mp3", cover: "https://images.unsplash.com/photo-1493225255756-d9584f8606e9?q=80&w=300&auto=format&fit=crop", color: "#f43f5e" },
        { title: "Golden Hour", artist: "Acoustic vibes", path: "https://www.soundhelix.com/examples/mp3/SoundHelix-Song-3.mp3", cover: "https://images.unsplash.com/photo-1459749411177-73451141556d?q=80&w=300&auto=format&fit=crop", color: "#eab308" },
        { title: "Deep Sea", artist: "Ambient Sounds", path: "https://www.soundhelix.com/examples/mp3/SoundHelix-Song-4.mp3", cover: "https://images.unsplash.com/photo-1487180144351-b8472da7d4f1?q=80&w=300&auto=format&fit=crop", color: "#06b6d4" },
        { title: "Urban Jungle", artist: "The Beats", path: "https://www.soundhelix.com/examples/mp3/SoundHelix-Song-5.mp3", cover: "https://images.unsplash.com/photo-1494232410401-ad00d5433cfa?q=80&w=300&auto=format&fit=crop", color: "#10b981" }
    ];

    // --- 3. DOM ELEMENTS ---
    const audio = new Audio();
    const playBtn = document.getElementById('playBtn');
    const playIcon = document.getElementById('playIcon');
    const pauseIcon = document.getElementById('pauseIcon');
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');
    const shuffleBtn = document.getElementById('shuffleBtn');
    const repeatBtn = document.getElementById('repeatBtn');
    
    // Volume Elements
    const volSlider = document.getElementById('volSlider');
    const muteBtn = document.getElementById('muteBtn');
    const volIconHigh = document.getElementById('volIconHigh');
    const volIconMute = document.getElementById('volIconMute');
    
    const progress = document.getElementById('progress');
    const currTimeEl = document.getElementById('currTime');
    const durTimeEl = document.getElementById('durTime');
    const titleEl = document.getElementById('songTitle');
    const artistEl = document.getElementById('songArtist');
    
    const mainVinyl = document.getElementById('mainVinyl');
    const artContainer = document.getElementById('artContainer');
    const albumArtImg = document.getElementById('albumArtImg');
    const mainLabelColor = document.getElementById('mainLabelColor');

    // --- 4. STATE VARIABLES ---
    let songIndex = 0;
    let isPlaying = false;
    let isShuffle = false;
    let isRepeat = false;
    let previousVolume = 1;

    // --- 5. AUDIO FUNCTIONS ---
    function loadSong(song) {
        titleEl.innerText = song.title;
        artistEl.innerText = song.artist;
        audio.src = song.path;
        albumArtImg.src = song.cover;
        mainLabelColor.setAttribute('fill', song.color);
    }

    function playSong() {
        isPlaying = true;
        playIcon.classList.add('hidden');
        pauseIcon.classList.remove('hidden');
        mainVinyl.classList.remove('paused-anim');
        artContainer.classList.remove('paused-anim');
        audio.play();
    }

    function pauseSong() {
        isPlaying = false;
        playIcon.classList.remove('hidden');
        pauseIcon.classList.add('hidden');
        mainVinyl.classList.add('paused-anim');
        artContainer.classList.add('paused-anim');
        audio.pause();
    }

    function prevSong() {
        if(audio.currentTime > 2) {
            audio.currentTime = 0;
        } else {
            songIndex--;
            if (songIndex < 0) songIndex = songs.length - 1;
            loadSong(songs[songIndex]);
            if(isPlaying) audio.play();
        }
    }

    function nextSong() {
        if (isShuffle) {
            let newIndex;
            do { newIndex = Math.floor(Math.random() * songs.length); } 
            while (newIndex === songIndex && songs.length > 1);
            songIndex = newIndex;
        } else {
            songIndex++;
            if (songIndex > songs.length - 1) songIndex = 0;
        }
        loadSong(songs[songIndex]);
        if(isPlaying) audio.play();
    }

    function updateProgress(e) {
        const { duration, currentTime } = e.srcElement;
        if (isNaN(duration)) return;
        const progressPercent = (currentTime / duration) * 100;
        progress.value = progressPercent;
        currTimeEl.innerText = formatTime(currentTime);
        durTimeEl.innerText = formatTime(duration);
    }

    function setProgress(e) {
        const width = this.value;
        const duration = audio.duration;
        audio.currentTime = (width / 100) * duration;
    }

    function formatTime(seconds) {
        let min = Math.floor(seconds / 60);
        let sec = Math.floor(seconds % 60);
        if (sec < 10) sec = `0${sec}`;
        return `${min}:${sec}`;
    }

    // --- 6. EVENT LISTENERS ---
    loadSong(songs[songIndex]);

    playBtn.addEventListener('click', () => isPlaying ? pauseSong() : playSong());
    prevBtn.addEventListener('click', prevSong);
    nextBtn.addEventListener('click', nextSong);
    audio.addEventListener('timeupdate', updateProgress);
    audio.addEventListener('ended', () => isRepeat ? (audio.currentTime=0, audio.play()) : nextSong());
    progress.addEventListener('input', setProgress);

    shuffleBtn.addEventListener('click', () => {
        isShuffle = !isShuffle;
        shuffleBtn.classList.toggle('text-indigo-600');
        shuffleBtn.classList.toggle('dark:text-indigo-400');
    });

    repeatBtn.addEventListener('click', () => {
        isRepeat = !isRepeat;
        repeatBtn.classList.toggle('text-indigo-600');
        repeatBtn.classList.toggle('dark:text-indigo-400');
    });

    // Volume Slider
    volSlider.addEventListener('input', (e) => {
        const val = e.target.value;
        audio.volume = val;
        if(val == 0) {
            volIconHigh.classList.add('hidden');
            volIconMute.classList.remove('hidden');
        } else {
            volIconHigh.classList.remove('hidden');
            volIconMute.classList.add('hidden');
        }
    });

    // Mute Button Toggle
    muteBtn.addEventListener('click', () => {
        if(audio.volume > 0) {
            previousVolume = audio.volume;
            audio.volume = 0;
            volSlider.value = 0;
            volIconHigh.classList.add('hidden');
            volIconMute.classList.remove('hidden');
        } else {
            audio.volume = previousVolume;
            volSlider.value = previousVolume;
            volIconHigh.classList.remove('hidden');
            volIconMute.classList.add('hidden');
        }
    });

</script>
</body>
</html>